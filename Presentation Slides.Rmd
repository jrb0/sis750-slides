---
title: "Does the success of MLB teams affect rent prices in areas surrounding baseball stadiums?"
subtitle: "âš¾"
author: "Johnny Bachrach"
date: "April 9th, 2025"
output:
  xaringan::moon_reader:
    lib_dir: libs
    css: [default, fc, default-fonts]
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
      ratio: "16:9"
      
---


```{r setup, include=FALSE}
## Libraries
  library(knitr)
  library(rmdformats)
  library(Lahman)             
  library(tidyverse)
  library(dplyr)
  library(baseballr)
  library(scales)
  library(lfe)
  library(modelsummary)

## Global options
knitr::opts_chunk$set(
  echo = FALSE, prompt = FALSE,
  tidy = FALSE, comment = NA,
  message = FALSE, warning = FALSE,
  fig.align = 'center'
)

new_filtered_test <- read.csv('new.filtered.test.csv')
```

# Overview

.pull-left[## Question:

- Does the success of a given MLB team in a particular year cause **rent prices in nearby homes and apartments to rise** in the following year?]

.pull-right[## Findings:

- For every additional win earned by an MLB team in a particular year, rent prices in the zip code where the stadium is located are expected to rise **$2.25/month** the following year _(after controlling for citywide rent prices)_.]


---

# Data

## Rent Data

- **Zillow Observed Rent Index** _(ZORI)_
  - Mean of listed rents that fall into the 35th to 65th percentile range for all homes and apartments in a given region.

## Historical Wins by Year by MLB Team

- Pulled from **Lahman Baseball Database** using r package "Lahman".
- Tested wins variable **lagged by 1, 2, and 3 years** to understand postponed effects of success.]

---

# After controlling for citywide rent prices, each additional win was associated with a **$2.25/month** rise in average rent price.

.center.middle[.pull-right[ ## Results: Regression controlling for citywide rent
```{r}
library(broom)
library(knitr)
library(kableExtra)

mods <- 
  new_filtered_test %>%
  filter(HR_year != 2020) %>%
  { 
    list(Regression = felm(rent ~ W + mean_rent, data = .))
  }

modelsummary(
  mods, 
  gof_map = c('nobs'), 
  stars = TRUE, 
  output = 'gt'
)

```


.center[_** *Filtered to exclude shortened 2020 season **_]

]]

.pull-left[
```{r, fig.align='center', echo=FALSE, fig.width=7, fig.height=7}

new_filtered_test %>%
  filter(HR_year != 2020) %>%
  group_by(CODE) %>%
  filter(n() >= 5) %>%
  ungroup() %>%
  ggplot(aes(x = W, y = rent)) +
  scale_y_continuous(
    breaks = seq(0, max(new_filtered_test$rent, na.rm = TRUE), by = 1000),
    limits = c(750, NA),
    labels = scales::label_dollar()
  ) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE, size = 1, color = "#fd5c0b") +
  labs(x = "Wins in Prior Year",
       y = "Monthly Rent") +
  theme_classic() +
  theme(plot.background = element_rect(fill = "#fafafa", color = "#fafafa"),
        panel.background = element_rect(fill = "#fafafa", color = "#fafafa"),
        axis.title.x = element_text(size = 15, margin = margin(t = 15)),
        axis.title.y = element_text(size = 15, margin = margin(r = 15)),
        axis.text.x = element_text(size = 12),
        axis.text.y = element_text(size = 12))
```
]
---

# Results varied significantly from team to team. 

.pull-left[- Limited availability of zip code specific rent price data makes granular evaluation difficult, but team-level data shows interesting trends.

- **Strongest effect** was seen in the year immediately following a successful season.
  
- Large variation in rent prices from city to city introduces noise; **citywide rent variable added as control** to account for differences in rental markets.
]


.pull-right[
```{r, echo=FALSE, message=FALSE, warning=FALSE}
new_filtered_test %>%
  filter(HR_year != 2020) %>%
  group_by(CODE) %>%
  filter(n() >= 5) %>%
  ungroup() %>%
  ggplot(aes(x = W, y = rent)) +
  scale_y_continuous(
    breaks = seq(0, max(new_filtered_test$rent, na.rm = TRUE), by = 1000),
    limits = c(750, NA),
    labels = scales::label_dollar()
  ) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE, size = 1, color = "#fd5c0b") +
  labs(x = "Wins in Prior Year",
       y = "Monthly Rent") +
  theme_classic() +
  theme(plot.background = element_rect(fill = "#fafafa", color = "#fafafa"),
        panel.background = element_rect(fill = "#fafafa", color = "#fafafa"),
        axis.title.x = element_text(size = 15, margin = margin(t = 15)),
        axis.title.y = element_text(size = 15, margin = margin(r = 15)),
        axis.text.x = element_text(size = 12),
        axis.text.y = element_text(size = 12)) +
  facet_wrap(~ CODE)
```
]


---


# Potential Improvements for Future Study

## Limited availability of zip code level rent data
- Analysis was conducted with only 149 observations, making findings difficult to verify on a city level

## 


---
# Hosting with ghpages

You can host your slides remotely on github!

1. Initiate and clone a repository.  
2. Build and compile your slides.  
3. CRITICAL: name the deck `index.html`.  
4. Commit and push to github.  
5. On github, go to Settings -> Pages.  
6. Change "Branch" from none to master. Click save.  
7. Find your slides at: `user_name.github.io/repo_name`

---
# Useful Resources

- Yihui Xie is the guru of all things markdown (and the author of the `knitr` package). His book [R Markdown: The Definitive Guide](https://bookdown.org/yihui/rmarkdown/)  is a great intro. See Chapters 4, 7, 9 for info on slide presentations.

- Irene Vrbik also has an excellent [example slide deck](https://irene.vrbik.ok.ubc.ca/slides/NHSRxaringan.html#1). See her [markdown code on github](https://github.com/vrbiki/learning-xaringan/blob/master/NHSRxaringan.Rmd) to mimic all the little fancy things.

